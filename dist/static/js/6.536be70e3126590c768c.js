webpackJsonp([6],{BI6w:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("Aaao"),o=a("mOxS"),i=a("P9l9"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,s){try{var o=t[n](s),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}var c={data:function(){return{orderData:[],offset:0,limit:50,indexPage:1,total:0,page:0,moreData:[]}},components:{indexHeader:s.a,indexFooter:o.default},methods:{getOrderData:function(){var e=this;return u(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.total){t.next=5;break}return t.next=3,Object(i.j)();case 3:a=t.sent,e.total=a.count;case 5:return e.offset=e.page*e.limit,t.next=8,Object(i.x)(e.limit,e.offset);case 8:r=t.sent,e.orderData=[],r.forEach(function(t,a){var r={};r.id=t.id,r.total_amount=t.total_amount,r.status=t.status_bar.title,r.formatted_created_at=t.formatted_created_at,r.user_id=t.user_id,r.restaurant_id=t.restaurant_id,r.address_id=t.address_id,r.index=a,e.orderData.push(r)});case 11:case"end":return t.stop()}},t,e)}))()},changeSize:function(e){this.limit=e,console.log(e)},changeCurrent:function(e){this.page=e-1,console.log(e)},showMoreData:function(e,t){var a=this;return u(n.a.mark(function t(){var r,s,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id===a.moreData){t.next=14;break}return t.next=3,Object(i.z)(e.restaurant_id);case 3:return r=t.sent,t.next=6,Object(i.F)(e.user_id);case 6:return s=t.sent,t.next=9,Object(i.d)(e.address_id);case 9:o=t.sent,Promise.all([r,s,o]).then(function(t){t&&a.orderData.splice(e.index,1,l({},e,{restaurant_name:t[0].name,restaurant_address:t[0].address,address:t[2].address,user_name:t[1].username}))}),a.moreData=e.id,t.next=15;break;case 14:console.log("已加载过");case 15:case"end":return t.stop()}},t,a)}))()}},mounted:function(){this.getOrderData()},watch:{page:function(){this.getOrderData()},limit:function(){this.getOrderData()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"homeRight"},[a("index-header"),e._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData,"row-key":function(e){return e.index}},on:{"expand-change":e.showMoreData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"用户名"}},[a("span",[e._v("\n                  "+e._s(t.row.user_name)+"\n                ")])]),e._v(" "),a("el-form-item",{attrs:{label:"店铺名称"}},[a("span",[e._v("\n                  "+e._s(t.row.restaurant_name)+"\n                ")])]),e._v(" "),a("el-form-item",{attrs:{label:"收货地址"}},[a("span",[e._v("\n                  "+e._s(t.row.address)+"\n                ")])]),e._v(" "),a("el-form-item",{attrs:{label:"店铺 ID"}},[a("span",[e._v("\n                  "+e._s(t.row.restaurant_id)+"\n                ")])]),e._v(" "),a("el-form-item",{attrs:{label:"店铺地址"}},[e._v("\n                "+e._s(t.row.restaurant_address)+"\n              ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"总价格",prop:"total_amount"}}),e._v(" "),a("el-table-column",{attrs:{label:"下单时间",prop:"formatted_created_at"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",prop:"status"}})],1),e._v(" "),a("div",{staticClass:"m10"},[a("el-pagination",{attrs:{"current-page":e.indexPage,"page-sizes":[50,100,200],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent}})],1)],1),e._v(" "),a("index-footer")],1)},staticRenderFns:[]};var f=a("VU/8")(c,d,!1,function(e){a("QzLB")},null,null);t.default=f.exports},QzLB:function(e,t){}});